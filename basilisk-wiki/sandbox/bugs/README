To report bugs [edit this page](/_edit/sandbox/bugs/README) and add
them to the list below.

To create a new page to hold the source code for your bug, you just
need to add the link to the list below and save this page. Your link
should look like

~~~markdown
* [My bug which shows this problem](mycode.c)
~~~

Once you have saved the page, you can click on the link which will
open the editor for the new page (`mycode.c`). Next, cut and paste
your code (do not try to 'upload' the file directly) and add any
comments you want to describe the problem more clearly (see below for
examples of decent bug reports).

You can then use the "Preview" button to display the code and (if you
have the right permissions), run it. Ideally, this should reproduce
the bug. Once you are happy with the result, "Save" the page.

Note that the files generated by the running code are accessible in
`/sandbox/bugs/mycode/`. In particular the standard error and standard
output are in `/sandbox/bugs/mycode/log` and
`/sandbox/bugs/mycode/out` respectively.

See also [how to create test
cases](/src/test/README#running-and-creating-test-cases-and-examples).  

# Bugs

* [Default arguments do not work for functions returning a pointer](defaultargs.c)
* [user-defined macros do not apply reductions](reductions.c)
* [Iterative convergence on a multigrid is unreasonably bad compared to a tree grid](poisson_mg.c)
* [No-slip condition violated for viscous Stokes flow with embedded boundary](marginal_embed_2.c)
* [Vertex scalar: refinement of the vertex scalar on the block boundary for MPI run is not correct](my_adapt_bug.c)
* [Bview: `squares()` may not slice the cells correctly](plane.c)
* [adaptivity, embed and two-phase](bugEmbed.c)
* [foreach_boundary MPI](foreach_boundary_MPI.c)
* [foreach_boundary ghost undeclared](foreach_boundary.c)
* [Errors when restarting simulations](atomisation_NoEdit.c)
* [Manually setting the density - bug?](bug_karman_rho.c)
* [No results when running examples/bubble.c?](bubble_no_results.c)
* [Bug? - mu in examples/porous3D.c](porous3D_mu.c)
* [Artefacts near top and bottom border in karman.c](bug_karman.c)
* [Spurious velocity at intersections of non-periodic faces in rotational stokes flow](spurious_velocity_face_intersections.c)
* [No flux across embedded boundary for marginal case](marginal_embed.c)
* [svg file generation is not working](svgSave.c)
* [Offset in boundary iterator when periodic BC is applied](foreach_bnd.c)
* [Check for openMP fails](check_for_openmp.c)
* [Leaking boundaries for compressible flows](leaking.c)
* [Initializing interfaces tangent to grid cells triggers numerical instability](rising_bug.c)
* [Inconsistent 5x5 stencil on root level of trees](QuadtreeLevelZeroGhostcells.c)
* [Fails of fractions() when an interface crosses exactly in the center of cells](bug-fractions.c)
* [Error solving the Poisson equation of a program compiled in parallel that runs in serial](http://www.basilisk.fr/sandbox/fuster/Miscellaneous/bugpoisMPI.c)
* [Neumann conditions are false in the second row of ghost cells](boundary_2_neumann.c)
* [Fail of line_length_center() in geometry.h when an interface is exactly inbetween two cells](http://basilisk.fr/sandbox/crobert/geometry_mwe.c)
* [Interactive bview does not understand keys to `save()`](bv.c)
* [Restore function resetting N to 1](test_restart.c)
* [Box-boundary values are not set consistently among grid types](mgbc.c)
* [Incorrect flow rate imposed](discharge_bug.c)
* [qcc may create a new folder](tempfolderbug)
* [Inconsistent rotation with `foreach_dimension()`](inconsistent_rotation.c)
* [`foreach_segment()` misses intersections](segment_finder.c)
* [`foreach_boundary()` does not work together with `grid/cartesian-1D.h`](essai_discharge.h.c)
* [Vorticity evaluation seems not work in axisymmetric configuration](vortex_ring.c)
* [Custom variable named `datasize` doesn't raise error/warnings](bug_datasize.c)
* [The time `t` becomes abnormally large when using the `restore` function](restart-restore.c).
* [Stencil offset on second layer ghost cells in multigrid solver](multigrid_ghost_bc_offset.c)
* [Multilayer vertical diffusion becomes singular if there exist dry cells in the domain](singularity_diffusion.c)
* [Minor qcc errors when compiling+linking with OpenMPI,Petsc libraries](openmpi_petsc_minimal.c)
* [Tracer noise when there are embedded boundaries and two viscosities](tracer_noise.c)
* [Macros are incompatible with utils.h or run.h](macro_utils_h.c)

# [It's not a bug, it's a feature](https://fr.wiktionary.org/wiki/it%E2%80%99s_not_a_bug,_it%E2%80%99s_a_feature)

The bugs below have been classified as "features" i.e. scenarios which
reveal limitations in the algorithms of Basilisk but are not coding
mistakes.

* [Successive identical runs give different results](successive_runs.c) [11/11/2024](/src/?changes=20241110181154)
* [Unexpected behaviour of event inheritance](event_weird.c)
* [Boundaries are not automatic when using 'locate'](foreach_neighbor_test.c)
* [Solid variables must be listed before metric ones in adapt](axi-adapt.c)
* [output_gfs swap the components of tensors and vectors](zordering.c): this is too 
  GfsView-specific and too difficult to fix.
* [Refinement around the edges of the domain lead to high memory
  usage](test_adapt0.c): The explanation for the high memory usage is
  that this particular pattern of refinement is a worst-case scenario
  for the indexing scheme used to encode the quadtree.
* [qcc attribute bug](attribute.c): the type system of qcc is too rudimentary.
* [Inconsistent `break` behaviour in foreach loop](break_out.c): one should not break out of foreach loops.

# Old bugs

The bugs below should be fixed in the most recent release.

* [qcc crashes when using the diagonalize macro with a list of scalars](diagonalize_list.c) [31/03/25](/src/?changes=20250331163933)
* [foreach_neighbor() not properly nested with for (scalar ...)](neighbor.c) [12/02/2025](/src/?changes=20250212195155)
* [Unused variable in example case ginzburg-landau.c](unused_var_ginzburg-landau.c) [10/11/2024](/src/?changes=20241110160056)
* [Qcc and list iterator may fail (v3)](lists3.c) [10/11/2024](/src/?changes=20241110154836)
* [qcc hangs instead of returning error when missing compressible EOS](missing_EOS.c) [10/11/2024](/src/?changes=20241110153936)
* [missing boundary(cm) update at the end of axi.h, which leads to a null timestep](axi_null_timstep.c) [10/11/2024](/src/?changes=20241110150251)
* [Missing metric factor in VoF advection if EMBED is true](missing_metric.c) [09/11/2024](/src/?changes=20241109141119)
* [Qcc and list iterator may fail (v2)](lists2.c) 25/08/2024
* [qcc fails to recognize race condition - OpenMP](foreach_openmp.c) [15/01/2024](/src/?changes=20240115164051)
* [Dimensions and external library](dimension_netcdf.c) [13/01/2024](/src/?changes=20240113183524)
* [Memory overflow in qcc](stack.c) [28/11/2023](/src/?changes=20231128143423)
* [Qcc: Long compilation time](patience.c) [1/11/2023](/src/?changes=20231101171232)
* [Optional arguments and function pointers](optional.c) [7/10/2023](/src/?changes=20231007171002)
* [View() not recognizing tx,ty zero arguments](view_arguments.c) [23/9/2023](/src/?changes=20230923152223)
* [Whitespaces are required when setting boundary conditions](whitespace.c) 29/3/2023
* [a line to compile grammar does not use $(CC) variable](src_ast_makefile.c) 29/3/2023
* ['automatic()' is not automatic](automatic1.c) 18/11/2022
* [static FILE* crashes qcc](static_file.c) 22/9/2022
* [A typo crashes qcc](typo.c) 22/9/2022
* [Scalar-list iterator inside foreach() loop may not compile](lists.c) 22/9/2022
* [`wavelet()` and MPI can cause a lock](wavelet_bug.c) 5/7/2022
* [Fields are not freed when using 'break'](break.c) 5/7/2022
* [`Foreach_dimension()` and `locate()` cause qcc to fail](fored.c) 5/7/2022
* [Some compilation incompatibility arises after patch 'Automatic boundary conditions'](coord_compil.c) 5/7/2022
* [Squares() does not work properly with underscores](bugsquaresmwe.c) 21/10/2020
* [collision of types](segment.c): foreach_segment() use *p* for the coordinates of the segments which often collides with the global scalar *p* of the solvers. The obvious simple solution is to rename the coord *p*. 28/4/2020
* [Periodic boundaries don't work with cartesian1D](periodic.c) 10/4/2020
* [path to "/home/basilisk/terrain/etopo2" missing](http://basilisk.fr/sandbox/M1EMN/Exemples/maree_bretagne.c) 30/9/2019
* [Bview order mirror do not color lines](mirror.c) 18/12/2018
* [Cells don't intersect with interface correctly at high refinement levels in bview3D](grid_view.c) 10/7/2018
* [Multigrid MPI crashes in the `boundary()` routine](MGmpiboundary.c) 11/3/2018
* [Surface fraction wrong when Level Set function is 0 exactly on a cell border](/src/test/fractions2.c) 11/3/2018
* [The tag() function does not like different refinement levels](/src/test/tag1.c) 28/2/2018
* [tag "symmetric" behaves differently for global and local variables](symm.c) 28/2/2018
* [Floating point exception while restoring an axisymetric simulation](axiRestore.c)
* [MPI multigrid restore fails at large grid sizes](/sandbox/wmostert/restorer.c) following [the dump](/sandbox/wmostert/dumper.c) 26/2/2018
* [Arrays and scalars cannot be mixed](array.c): the type system of qcc is too rudimentary. 9/12/2017
* [Arithmetic error with adaptativity and surface tension](bigGeom.c)
* [Refine with adapt-wavelet may have some issues](adaptwaveletbug.c) 27/6/2017
* [Refine() + tracer.h + axi.h collapse](refine.c) 26/6/2017
* [Mixed boundary conditions for vector fields](mixed.c) 25/6/2017
* [Convergence problem with 2 differents time output](/src/test/time.c) 25/6/2017
* [The tag function does not identify properly different area of liquid](bugTag.c) 25/6/2017
* [Strange behaviour of adaptive refinement](/src/test/adaptbug.c) 24/6/2017
* [Artificial creation and acceleration of a droplet](droplet.c) 15/6/2017
* [Using foreach_boundary with curvature.h and tree meshes](foreach_bnd.c) 25/5/2017
* [Boundary for tracer with axi.h + mask](tracer.c)
* [Source file crashes the compiler](karman.c) 6/4/2017
* [adapt_wavelet() does not properly initialize some fields upon refinement](adapt_wavelet_bug.c) 30/6/2016
* [Floating Point exception in tsunami run with openMP](FloatingPoint) 30/11/2015
* [Restriction of face vector fields for masked domains](/src/test/mask.c) 13/11/2015
* [Macros on some Intel compilers](Macros) 5/9/2015

# Not bugs

* [bump2D-gpu run in to error "> # 15 shaders"](http://www.basilisk.fr/src/test/bump2D-gpu.c)
* [We can't change the date of the final `event` during the run](bug_end_time.c)
* [qcc hangs and create size-increasing file when using a wrong option](qcc_wrong_option.c)
* [qcc fails to parse a string that contains a macro](bug_macro_string.c)
* [modifying cell value of scalar field is applied to all layers in multilayer solver](scalar_field_multilayer_potential_bug.c)
* [`foreach_dimension(3)` acts as `foreach_dimension(2)` in 2D](foreach_dim_3.c)
* [MPI threads can get stuck using automatic boundary conditions](automatic.c)
* [Error when creating python module](make_python)
* [Scalar created in event is killing global scalar in multilayer model with remap.h included](LHydro_bug.c)
* [Scalar field attributes are randomly modified](scalar_attribute_mwe.c)
* [Assertion failed when including axi.h before navier-stokes/conserving.h](conservingBug.c)
* [Restore scalars with the same name](restore-bug.c)
* [No cell traversal with foreach_boundary() on periodic boundary
  conditions](flowrate.c)
* [Cannot impose pressure drop on a tri-periodic domain](sphere.c)
* [Using refine(): Saint-Venant is not exact for stillwater](stillwater.c)
* [basilisk output_gauges has bug when outputting vectors](basilisk_gauge_bug.c)
* [Combining adaptivity with acceleration term](adapt_accel.c)
* [Boundary for tensor and vector are not set](tensor_boundary.c)
* [Advection scheme mess up  with tensors](adv_check.c)
* [Incompletion of time marching event](event_time.c)
* [Problem with scalar list evolving being scrambled - incorrectly initialised so it was local and not global - see example](evolving_scalar_list_bug.c)

# Cannot reproduce

The following bugs cannot be reproduced when using the latest version i.e. they may have been fixed by other patches.

* [Segmentation error in `solve()`](solve.c)
* [Global `vertex scalar`-field attributes are not set properly](test_vertex.c)

# Incomplete bug reports

Critical information is lacking to be able to reproduce the bugs reported below:

* [adding the properties event changes the results](interfacialFlow.c)
* [Velocity overshoot in axisymmetrical droplet for high density ratios](axiDrop.c)

# Website bugs

## Suggestions

* **Please add any suggested improvements/wishlist etc.**
* https for login page.
* Option for CUA keys (copy paste with Ctrl + c/v etc)
* Remove the run timer. *(not sure what this means?)*
* The changes and history pages could be faster?
* On side-by-side edit view, add button to match left and right scroll positions
* Add anchors for plots
* "Show changes" button in edit mode
* `gnuplot` on all pages (e.g. a `*.h` page)
* HTML in "diff" document breaks changes page. [e.g. here](http://basilisk.fr/sandbox/Antoonvh/two_rings.c?changes=20240514102413)
* ...

## Bugs

* **Please report any problem here. Ideally including links to broken pages etc.**
* On my mac keyboard the square brackets do not work ! (don't know if it is a bug or not)
* The left panel "This page" is not available for auxiliary files like [rising.log_centered](/sandbox/lopez/rising.log_centered). How could be then deleted with the wiki?
* Comments in gnuplot scripts are not ignored as they should.
* Multilayer link from [general introduction](http://basilisk.fr/src/layered/README) to [horizontal viscosity module](http://basilisk.fr/src/layered/viscosity.h) is broken (points to nonexistant file).   
* [Bug in search box dialog](searchbox)

## Not (darcsit) bugs

* Plot is not generated [here](/sandbox/Antoonvh/timeaccuracy.c): *this is because SVG in gnuplot does not support the {/Symbol } fonts, use unicode characters instead as shown [here](/sandbox/Antoonvh/timeaccuracy.c.page?changes=20190514064828)*.
* This page does not exist any more: [here](/sandbox/Antoonvh/two_rings.c.nopage): *Well, it does not exist [here](http://basilisk.fr/sandbox/Antoonvh/two_rings.c.nopage) either.*
* [This page](/sandbox/Antoonvh/two_rings.nopage) does not exist, whereas [this mirror](http://basilisk.fr/sandbox/Antoonvh/two_rings.nopage) does exists. Note that [this](/sandbox/Antoonvh/two_rings) page now exists, where it would link to a folder on the old website? *It existed on the old site only because an obsolete version of the file was cached and not correctly updated, so this was a bug in the old site, not the new.*
* I want to ignore a warning [here](/sandbox/Antoonvh/distanceat.c), but it is treated as an error. *Calling undeclared functions is (really) bad, so you should find the cause of the warning/error in your code and fix it, rather than ignoring it.*

## Fixed bugs

* All pages in [the sandbox](/sandbox/) give an "Internal Error" message.
* SIGFPE in progress.h: [e.g. here](/sandbox/Antoonvh/internalwacesMG.c)
* Cannot `#include` a specific header file: [e.g. here](/sandbox/Antoonvh/parttest.c)
* The file created by clicking a previously created link starts with the following (editable) lines:  `<h1>404 Not Found</h1>`
 `While retrieving URL /sandbox/lopez/ehd_2phase.h?raw on basilisk-wiki.localhost.`
* [This page](/sandbox/Antoonvh/itmov.c) should run using 3 threads, but it uses only 1.
* Page hangs at 100% progress: [here](/sandbox/Antoonvh/periodicdipoles.c)
* The page corresponding to testcase [lid.c](/src/test/lid.c) is not properly updated. The results corresponding to this test case are not generated at the end.
* This [error](/sandbox/fuster/Allmach3.0/DiscontinuityAdvection.c) is not parsed properly
* If I edit a page, then preview, and click on a link to see if it works, and goes back to the initial pages,
all the modifications are lost in the editor (don't know if it is a bug but as far as I remember this did not do the same thing in the previous interface).
* History does not work when file name changes [example](/Basilisk%20C?changes=20190422160216) *This is not fixed for the general case, only for .page and space changes*.
* Line numbers in comments [here](/src/examples/tsunami.c)
* Internal error [here](/sandbox/acastillo/battery.c)
* Editing [this](/_edit/sandbox/Antoonvh/The_adaptive_wavelet_algirthm) page does not go well
* Saving a new page while it is running, does indeed save the page. But, instead of taking me to the new page, it prompts a red-dot error "message" (no text).
* [This](/src/grid/tree-mpi.h) bothers me more than it should.
* Warnings are not parsed properly and/or the page is not updated [here](/sandbox/jventre/Stenose/MaskJ.c) (after discarding during a first run).
* After deleting a .ch page using the wave (couette.c in the present case). The rest of pages are not accesible because of the following error:  `500 Internal Server Error While retrieving URL /sandbox/lopez/drop.c.' /home/basilisk-wiki/wiki/sandbox/lopez/drop.c.log: make: *** No rule to make target 'couette.c.tags.d', needed by 'Makefile.deps'.  Stop.`

## Granted wishes

* Side-by-side edit view.
* Math/Equations display proper using any browser.
* Documented files do not need the ".page" suffix anymore.
* Documented files do not have to start with a comment block.

## Notes

* [katex](https://katex.org/docs/supported.html) does not like
  `\mbox{}` use `\mathrm{}` or `\text{}` instead.
* [katex](https://katex.org/docs/supported.html) does not like
  `\begin{eqnarray}` use `\begin{aligned}` instead.
